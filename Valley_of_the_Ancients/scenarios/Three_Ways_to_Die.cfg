#textdomain wesnoth-Valley_of_the_Ancients

[multiplayer]
    id=3_Ways_2_Die_scenario
    name= _ "3 Ways 2 Die"
    description= _ "Six Warrior came into a Cave to discover it but a evil mage and becom prisinors. Now they must fight together to defead the evil mage."
    map_data="{~add-ons/Valley_of_the_Ancients/maps/3_Ways_2_Die.map}"
    experience_modifier=70%
    turns=-1
    random_start_time=yes

    {DEFAULT_SCHEDULE}
    {DEFAULT_MUSIC_PLAYLIST}

    {~add-ons/Valley_of_the_Ancients/utils/Death_upgrade.cfg}

#define COLOSSEUM_ENEMY_A TYPE
	#NOTRAIT_UNIT SIDE TYPE X Y
    {NOTRAIT_UNIT 1 {TYPE} 20 7}
    {NOTRAIT_UNIT 1 {TYPE} 26 7}
    {NOTRAIT_UNIT 1 {TYPE} 2 14}
    {NOTRAIT_UNIT 1 {TYPE} 43 14}
    {NOTRAIT_UNIT 1 {TYPE} 3 10}
    {NOTRAIT_UNIT 1 {TYPE} 42 10}
#enddef

#define COLOSSEUM_ENEMY_B TYPE
    {NOTRAIT_UNIT 1 {TYPE} 19 7}
    {NOTRAIT_UNIT 1 {TYPE} 27 7}
    {NOTRAIT_UNIT 1 {TYPE} 2 13}
    {NOTRAIT_UNIT 1 {TYPE} 43 13}
    {NOTRAIT_UNIT 1 {TYPE} 3 9}
    {NOTRAIT_UNIT 1 {TYPE} 42 9}
#enddef

#define COLOSSEUM_ENEMY_C TYPE
    {NOTRAIT_UNIT 1 {TYPE} 19 6}
    {NOTRAIT_UNIT 1 {TYPE} 27 6}
    {NOTRAIT_UNIT 1 {TYPE} 2 15}
    {NOTRAIT_UNIT 1 {TYPE} 43 15}
    {NOTRAIT_UNIT 1 {TYPE} 3 11}
    {NOTRAIT_UNIT 1 {TYPE} 42 11}
#enddef

#define COLOSSEUM_ENEMY_D TYPE
    {NOTRAIT_UNIT 1 {TYPE} 20 6}
    {NOTRAIT_UNIT 1 {TYPE} 26 6}
    {NOTRAIT_UNIT 1 {TYPE} 1 16}
    {NOTRAIT_UNIT 1 {TYPE} 44 15}
    {NOTRAIT_UNIT 1 {TYPE} 2 11}
    {NOTRAIT_UNIT 1 {TYPE} 43 12}
#enddef

#define COLOSSEUM_ENEMY_E TYPE
    {NOTRAIT_UNIT 1 {TYPE} 21 7}
    {NOTRAIT_UNIT 1 {TYPE} 25 7}
    {NOTRAIT_UNIT 1 {TYPE} 1 15}
    {NOTRAIT_UNIT 1 {TYPE} 44 14}
    {NOTRAIT_UNIT 1 {TYPE} 2 10}
    {NOTRAIT_UNIT 1 {TYPE} 43 11}
#enddef

#define COLOSSEUM_ENEMY_F TYPE
    {NOTRAIT_UNIT 1 {TYPE} 22 7}
    {NOTRAIT_UNIT 1 {TYPE} 24 7}
    {NOTRAIT_UNIT 1 {TYPE} 1 14}
    {NOTRAIT_UNIT 1 {TYPE} 44 13}
    {NOTRAIT_UNIT 1 {TYPE} 2 9}
    {NOTRAIT_UNIT 1 {TYPE} 43 10}
#enddef

#define COLOSSEUM_ENEMY_G TYPE
    {NOTRAIT_UNIT 1 {TYPE} 18 5}
    {NOTRAIT_UNIT 1 {TYPE} 28 5}
    {NOTRAIT_UNIT 1 {TYPE} 1 13}
    {NOTRAIT_UNIT 1 {TYPE} 44 12}
    {NOTRAIT_UNIT 1 {TYPE} 2 8}
    {NOTRAIT_UNIT 1 {TYPE} 43 9}
#enddef

#define DIFFICULTY_OPTION ICON NAME GOLD DEDUCT
    [option]
        message={MENU_IMG_TXT {ICON} {NAME}}
        [command]
            {VARIABLE reward_deduction {DEDUCT}}
            [modify_side]
                side=2
                gold={GOLD}
            [/modify_side]
            [modify_side]
                side=3
                gold={GOLD}
            [/modify_side]
            [modify_side]
                side=4
                gold={GOLD}
            [/modify_side]
            [modify_side]
                side=5
                gold={GOLD}
            [/modify_side]
            [modify_side]
                side=6
                gold={GOLD}
            [/modify_side]
            [modify_side]
                side=7
                gold={GOLD}
            [/modify_side]
            [sound]
                name=dragonstick.ogg
            [/sound]
            [print]
                text=_ "Difficulty: "+"{NAME}"
                size=40
                duration=750
                red,green,blue=255,0,0
            [/print]
        [/command]
    [/option]
#enddef

#define COLOSSEUM_TELEPORT SIDE X Y
    [teleport]
        [filter]
            side={SIDE}
            canrecruit=yes
        [/filter]
        x={X}
        y={Y}
    [/teleport]
#enddef

#define COLOSSEUM_REGROUP SIDE X Y
    [object]
        silent=yes
        [filter]
            side={SIDE}
            canrecruit=yes
        [/filter]
        [effect]
            apply_to=hitpoints
            heal_full=yes
        [/effect]
        [effect]
            apply_to=status
            remove=poisoned
        [/effect]
        [effect]
            apply_to=status
            remove=slowed
        [/effect]
    [/object]
    {COLOSSEUM_TELEPORT {SIDE} {X} {Y}}
    [gold]
        side={SIDE}
        amount="$reward_gold|"
    [/gold]
#enddef

#define COLOSSEUM_WALLFALL TER
    {QUAKE "rumble.ogg"}
    [terrain]
        x=3,3,3,3,3,4,4,4
        y=12,13,14,15,16,9,10,11
        terrain={TER}
    [/terrain]
    [terrain]
        x=18,19,20,21,22,23,24,25,26,27,28
        y=7,8,8,9,9,10,9,9,8,8,7
        terrain={TER}
    [/terrain]
    [terrain]
        x=42,42,42,42,41,41,41
        y=15,14,13,12,12,11,10
        terrain={TER}
    [/terrain]
#enddef

    [event]
        name=prestart

        [objectives]
            side=0
            [objective]
                description= _ "Death of all enemies."
                condition=win
            [/objective]
            [objective]
                description= _ "Death of all Warriors."
                condition=lose
            [/objective]
        [/objectives]

        {VARIABLE resup_left_2 9}
        {VARIABLE resup_left_3 9}
        {VARIABLE resup_left_4 9}
        {VARIABLE resup_left_5 9}
        {VARIABLE resup_left_6 9}
        {VARIABLE resup_left_7 9}
        {VARIABLE terup_left_2 3}
        {VARIABLE terup_left_3 3}
        {VARIABLE terup_left_4 3}
        {VARIABLE terup_left_5 3}
        {VARIABLE terup_left_6 3}
        {VARIABLE terup_left_7 3}
        {VARIABLE defup_left_2 7}
        {VARIABLE defup_left_3 7}
        {VARIABLE defup_left_4 7}
        {VARIABLE defup_left_5 7}
        {VARIABLE defup_left_6 7}
        {VARIABLE defup_left_7 7}
        {VARIABLE newabi_2 0}
        {VARIABLE newabi_3 0}
        {VARIABLE newabi_4 0}
        {VARIABLE newabi_5 0}
        {VARIABLE newabi_6 0}
        {VARIABLE newabi_7 0}
        {VARIABLE new_weapon_2 0}
        {VARIABLE new_weapon_3 0}
        {VARIABLE new_weapon_4 0}
        {VARIABLE new_weapon_5 0}
        {VARIABLE new_weapon_6 0}
        {VARIABLE new_weapon_7 0}
        {VARIABLE custom_feed2 1}
        {VARIABLE custom_feed3 1}
        {VARIABLE custom_feed4 1}
        {VARIABLE custom_feed5 1}
        {VARIABLE custom_feed6 1}
        {VARIABLE custom_feed7 1}

        {VARIABLE colosseum_rest on}
        {VARIABLE wave_number 1}

        #{VARIABLE bottom_units 0}
        #{VARIABLE top_units 0}

        [kill]
            x,y=14,6
        [/kill]
        [kill]
            x,y=15,6
        [/kill]

        {PLACE_IMAGE "scenery/tent-ruin-1.png" 23 29}
        {PLACE_IMAGE "scenery/rune1.png" 18 19}
        {PLACE_IMAGE "scenery/rune1.png" 15 20}
        {PLACE_IMAGE "scenery/rune2.png" 28 19}
        {PLACE_IMAGE "scenery/rune2.png" 31 20}

        {NOTRAIT_UNIT 8 "Lich" 24 3}
        {NOTRAIT_UNIT 8 "Lich" 22 3}
    [/event]

    [event]
        name=start

        [message]
            side=8
            canrecruit=yes
            message= _ "Welcome prisoners, hehe.
 
Now I will show my mighty power to defead you to become my soldier.
 
You have only one Way to come out, haha, but you have no chance, you must defead all my monsters to come out.
 
Try it but you lose!"
        [/message]

        {COLOSSEUM_ENEMY_A "Vampire Bat"}
        {COLOSSEUM_ENEMY_B Woodsman}
        {COLOSSEUM_ENEMY_C Mudcrawler}

        [message]
            speaker=narrator
            message= _ "Move your unit in the 'Upgrade' tent, to upgrade your unit. You can upgrade your unit at the beginning of each wave."
            image="wesnoth-icon.png"
        [/message]
    [/event]

    [event]
        name=moveto,recruit

        [message]
            speaker=narrator
            image="wesnoth-icon.png"
            message=_ "Choose difficulty:"

            {DIFFICULTY_OPTION "units/undead/soulless-mounted.png~RC(magenta>black)" (_"Noob") 140 3}
            {DIFFICULTY_OPTION "units/undead-necromancers/adept.png~RC(magenta>red)" (_"Amateur") 120 4}
            {DIFFICULTY_OPTION "units/undead-necromancers/dark-sorcerer-magic-1.png~RC(magenta>blue)" (_"Average") 100 5}
            {DIFFICULTY_OPTION "units/undead-necromancers/necromancer+female.png~RC(magenta>green)" (_"Senior") 80 6}
            {DIFFICULTY_OPTION "units/undead-necromancers/ancient-lich-melee.png~RC(magenta>white)" (_"Pro") 60 7}
        [/message]
    [/event]

    {COLOSSEUM_UPGRADE}

    [event]
        name=moveto
        first_time_only=no

        [filter]
            x=18
            y=19
            side=2,3,4,5,6,7
        [/filter]
        [teleport]
            x,y=15,20
        [/teleport]
        [sound]
            name="magic-dark-miss.ogg"
        [/sound]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=15
            y=20
            side=2,3,4,5,6,7
        [/filter]
        [teleport]
            x,y=18,19
        [/teleport]
        [sound]
            name="magic-dark-miss.ogg"
        [/sound]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=28
            y=19
            side=2,3,4,5,6,7
        [/filter]
        [teleport]
            x,y=31,20
        [/teleport]
        [sound]
            name="magic-dark-miss.ogg"
        [/sound]
    [/event]
    [event]
        name=moveto
        first_time_only=no
        [filter]
            x=31
            y=20
            side=2,3,4,5,6,7
        [/filter]
        [teleport]
            x,y=28,19
        [/teleport]
        [sound]
            name="magic-dark-miss.ogg"
        [/sound]
    [/event]

    [event]
        name=turn 2
        {COLOSSEUM_WALLFALL Ur}
    [/event]

    [event]
        name=side turn end
        first_time_only=no

        [if]
            [not]
                [have_unit]
                    side=1
                [/have_unit]
            [/not]
            [then]

                {VARIABLE colosseum_rest on}
                [if]
                    [variable]
                        name=reward_gold
                        less_than=10
                    [/variable]
                    [then]
                        {VARIABLE reward_gold 10}
                        {SET_LABEL 23 29 _"Reward gold: $reward_gold|"}
                    [/then]
                [/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=11
                    [/variable]
                    [then]
                        [message]
                            side=8
                            canrecruit=yes
                            message= _ "Damn! This is impossible! Nobody can beat all my monsters.You are not mortal. I disarpear!"
                        [/message]
                        [kill]
                            side=8
                        [/kill]
                        [kill]
                            side=1
                        [/kill]
                    [/then]
                [/if]
            [/then]
        [/if]

        [if]
            [variable]
                name=colosseum_rest
                equals=nothing
            [/variable]
            [variable]
                name=reward_gold
                greater_than_equal_to=10
            [/variable]
            [then]
                {VARIABLE_OP reward_gold sub $reward_deduction|}
                {SET_LABEL 23 29 (_"Reward gold: $reward_gold|")}
            [/then]
        [/if]
    [/event]

    [event]
        name=new turn
        first_time_only=no

        [if]
            [variable]
                name=colosseum_rest
                equals=on
            [/variable]
            [then]
                {COLOSSEUM_WALLFALL Xos}
                {SET_LABEL 23 29 (_"Upgrade")}

                {COLOSSEUM_REGROUP 2 23 28}
                {COLOSSEUM_REGROUP 3 24 28}
                {COLOSSEUM_REGROUP 4 24 29}
                {COLOSSEUM_REGROUP 5 23 30}
                {COLOSSEUM_REGROUP 6 22 29}
                {COLOSSEUM_REGROUP 7 22 28}

                {VARIABLE_OP wave_number add 1}

                [if]
                    [variable]
                        name=wave_number
                        equals=2
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Spearman"}
                        {COLOSSEUM_ENEMY_B "Orcish Archer"}
                        {COLOSSEUM_ENEMY_C "Elvish Shaman"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=3
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Mage"}
                        {COLOSSEUM_ENEMY_B "Naga Fighter"}
                        {COLOSSEUM_ENEMY_C "Dwarvish Thunderer"}
                        {COLOSSEUM_ENEMY_D "Sky Drake"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=4
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Gryphon Master"}
                        {COLOSSEUM_ENEMY_B "Wose"}
                        {COLOSSEUM_ENEMY_C "Dark Adept"}
                        {COLOSSEUM_ENEMY_D "Lieutenant"}
                        {COLOSSEUM_ENEMY_E "Soulless"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=5
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Elvish Marksman"}
                        {COLOSSEUM_ENEMY_B "Necrophage"}
                        {COLOSSEUM_ENEMY_C "Fire Drake"}
                        {COLOSSEUM_ENEMY_D "Javelineer"}
                        {COLOSSEUM_ENEMY_E "Rogue"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=6
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Saurian Flanker"}
                        {COLOSSEUM_ENEMY_B "Wraith"}
                        {COLOSSEUM_ENEMY_C "Merman Entangler"}
                        {COLOSSEUM_ENEMY_D "Dwarvish Berserker"}
                        {COLOSSEUM_ENEMY_E "Silver Mage"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=7
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Nightgaunt"}
                        {COLOSSEUM_ENEMY_B "Saurian Oracle"}
                        {COLOSSEUM_ENEMY_C "Master at Arms"}
                        {COLOSSEUM_ENEMY_D "Mermaid Siren"}
                        {COLOSSEUM_ENEMY_E "Huntsman"}
                        {COLOSSEUM_ENEMY_F "Dwarvish Runemaster"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=8
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Paladin"}
                        {COLOSSEUM_ENEMY_B "Orcish Warlord"}
                        {COLOSSEUM_ENEMY_C "Lich"}
                        {COLOSSEUM_ENEMY_D "Troll Warrior"}
                        {COLOSSEUM_ENEMY_E "Elvish Shyde"}
                        {COLOSSEUM_ENEMY_F "White Mage"}
                        {COLOSSEUM_ENEMY_G "Drake Thrasher"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=9
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Elvish Champion"}
                        {COLOSSEUM_ENEMY_B "Great Mage"}
                        {COLOSSEUM_ENEMY_C "Naga Myrmidon"}
                        {COLOSSEUM_ENEMY_D "Master Bowman"}
                        {COLOSSEUM_ENEMY_E "Dwarvish Lord"}
                        {COLOSSEUM_ENEMY_F "Giant Spider"}
                        {COLOSSEUM_ENEMY_G "Highwayman"}
                    [/then]
				[/if]

                [if]
                    [variable]
                        name=wave_number
                        equals=10
                    [/variable]
                    [then]
                        {COLOSSEUM_ENEMY_A "Yeti"}
                        {COLOSSEUM_ENEMY_B "Fire Dragon"}
                        {COLOSSEUM_ENEMY_C "Elvish Sylph"}
                        {COLOSSEUM_ENEMY_D "Armageddon Drake"}
                        {COLOSSEUM_ENEMY_E "Dwarvish Dragonguard"}
                        {COLOSSEUM_ENEMY_F "Death Knight"}
                        {COLOSSEUM_ENEMY_G "Ancient Lich"}
                    [/then]
				[/if]
            [/then]
        [/if]
    [/event]

    [event]
        name=side turn end
        first_time_only=no

        [if]
            [variable]
                name=side_number
                equals=8
            [/variable]
            [have_unit]
                side=1
            [/have_unit]
            [variable]
                name=colosseum_rest
                equals=on
            [/variable]
            [then]
                {VARIABLE colosseum_rest off}
            [/then]
        [/if]
    [/event]

    [event]
        name=new turn
        first_time_only=no

        [if]
            [variable]
                name=colosseum_rest
                equals=off
            [/variable]
            [then]
                {VARIABLE colosseum_rest nothing}
                {VARIABLE reward_gold 200}

                {COLOSSEUM_WALLFALL Ur}
                {SET_LABEL 23 29 (_"Reward gold: $reward_gold|")}
            [/then]
        [/if]
    [/event]

    [side]
        side=1
        allow_player=no
        controller=ai
        team_name=bad
        user_team_name=_ "Enemies"
        no_leader=yes
        allow_player=no
        [ai]
            aggression=1.0
            leader_value=7.0
            caution=0.0
            village_value=0.0
        [/ai]
    [/side]

    [side]
        side=2
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=3
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=4
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=5
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=6
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=7
        controller=human
        team_name=good
        user_team_name=_ "Prisoners"
        canrecruit=yes
        village_gold=0
        income=-2
        share_maps=yes
        share_view=yes
        fog=no
    [/side]

    [side]
        side=8
        allow_player=no
        controller=ai
        team_name=bad
        user_team_name=_ "Spectators"
        canrecruit=yes
        type=Ancient Lich
        name= _ "Lazarus"
        hitpoints=10000
        canrecruit=yes
        [ai]
            passive_leader=yes
            ai_algorithm=idle_ai
        [/ai]
    [/side]
[/multiplayer]

#undef COLOSSEUM_ENEMY_A TYPE
#undef COLOSSEUM_ENEMY_B TYPE
#undef COLOSSEUM_ENEMY_C TYPE
#undef COLOSSEUM_ENEMY_D TYPE
#undef COLOSSEUM_ENEMY_E TYPE
#undef COLOSSEUM_ENEMY_F TYPE
#undef COLOSSEUM_ENEMY_G TYPE
#undef DIFFICULTY_OPTION NAME GOLD DEDUCT
#undef COLOSSEUM_TELEPORT SIDE X Y
#undef COLOSSEUM_REGROUP SIDE X Y
#undef COLOSSEUM_WALLFALL TER